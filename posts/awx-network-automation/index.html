<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Continue the Network Automation Journey Using AWX | Gary Wong&#39;s Blog</title>
<meta name="keywords" content="automation, ansible, awx, kubernetes, cisco, networking">
<meta name="description" content="I have been working on a project recently to assist a customer in upgrading thousands of devices in their network. Managing such a large-scale upgrade requires automation to ensure consistency, efficiency, and reduced manual intervention.
For this project, AWX was selected as the automation UI platform, providing a powerful interface for managing Ansible playbooks, job templates, inventories, and credentials.

What is AWX?
AWX is the upstream open-source project for Red Hat Ansible Tower.
It provides an intuitive web UI for:">
<meta name="author" content="Gary Wong">
<link rel="canonical" href="https://garywong.pro/posts/awx-network-automation/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fee2131ae3286c7e1cdac8c0c2ed868bb83df113c3dd7180e4387955dd55f91b.css" integrity="sha256-/uITGuMobH4c2sjAwu2Gi7g98RPD3XGA5Dh5Vd1V&#43;Rs=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://garywong.pro/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://garywong.pro/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://garywong.pro/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://garywong.pro/apple-touch-icon.png">
<link rel="mask-icon" href="https://garywong.pro/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://garywong.pro/posts/awx-network-automation/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><meta property="og:url" content="https://garywong.pro/posts/awx-network-automation/">
  <meta property="og:site_name" content="Gary Wong&#39;s Blog">
  <meta property="og:title" content="Continue the Network Automation Journey Using AWX">
  <meta property="og:description" content="I have been working on a project recently to assist a customer in upgrading thousands of devices in their network. Managing such a large-scale upgrade requires automation to ensure consistency, efficiency, and reduced manual intervention.
For this project, AWX was selected as the automation UI platform, providing a powerful interface for managing Ansible playbooks, job templates, inventories, and credentials.
What is AWX? AWX is the upstream open-source project for Red Hat Ansible Tower.
It provides an intuitive web UI for:">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-05-01T00:00:00+00:00">
    <meta property="article:tag" content="Automation">
    <meta property="article:tag" content="Ansible">
    <meta property="article:tag" content="Awx">
    <meta property="article:tag" content="Kubernetes">
    <meta property="article:tag" content="Cisco">
    <meta property="article:tag" content="Networking">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Continue the Network Automation Journey Using AWX">
<meta name="twitter:description" content="I have been working on a project recently to assist a customer in upgrading thousands of devices in their network. Managing such a large-scale upgrade requires automation to ensure consistency, efficiency, and reduced manual intervention.
For this project, AWX was selected as the automation UI platform, providing a powerful interface for managing Ansible playbooks, job templates, inventories, and credentials.

What is AWX?
AWX is the upstream open-source project for Red Hat Ansible Tower.
It provides an intuitive web UI for:">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://garywong.pro/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Continue the Network Automation Journey Using AWX",
      "item": "https://garywong.pro/posts/awx-network-automation/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Continue the Network Automation Journey Using AWX",
  "name": "Continue the Network Automation Journey Using AWX",
  "description": "I have been working on a project recently to assist a customer in upgrading thousands of devices in their network. Managing such a large-scale upgrade requires automation to ensure consistency, efficiency, and reduced manual intervention.\nFor this project, AWX was selected as the automation UI platform, providing a powerful interface for managing Ansible playbooks, job templates, inventories, and credentials.\nWhat is AWX? AWX is the upstream open-source project for Red Hat Ansible Tower.\nIt provides an intuitive web UI for:\n",
  "keywords": [
    "automation", "ansible", "awx", "kubernetes", "cisco", "networking"
  ],
  "articleBody": "I have been working on a project recently to assist a customer in upgrading thousands of devices in their network. Managing such a large-scale upgrade requires automation to ensure consistency, efficiency, and reduced manual intervention.\nFor this project, AWX was selected as the automation UI platform, providing a powerful interface for managing Ansible playbooks, job templates, inventories, and credentials.\nWhat is AWX? AWX is the upstream open-source project for Red Hat Ansible Tower.\nIt provides an intuitive web UI for:\nOrganizing Ansible projects Executing playbooks Managing credentials Defining inventories Creating job templates and surveys AWX is especially useful when automating network device upgrades, where thousands of routers/switches require consistent and validated operations.\nAWX’s Limitation with Interactive Prompts One challenge I encountered:\nAWX cannot handle interactive CLI prompts from network devices.\nDuring Cisco IOS XE upgrades, devices commonly send prompts (e.g., “Are you sure?”).\nAWX jobs cannot respond to these prompts, causing the playbook to hang or fail.\nThis limitation required a workaround.\nWorkaround: Using Cisco Embedded Event Manager (EEM) To bypass interactive prompts, I used EEM scripts.\nEEM runs natively on Cisco devices and can automatically respond to system prompts during upgrades.\nThis ensures:\nThe playbook execution does not pause The upgrade workflow remains non-interactive AWX can perform fully automated rolling upgrades across thousands of devices This combination — AWX orchestrating automation + EEM handling device-level interactivity — proved extremely stable.\nBuilding a 3-Node Kubernetes Cluster for AWX Before deploying AWX, I built a 3-node Kubernetes cluster:\n1 control plane 2 worker nodes Key components:\nDeployed using kubeadm containerd as the container runtime Installed pod network (CNI plugin) Configured networking/storage classes for AWX persistence This Kubernetes foundation provides:\nHigh availability Scalability Resilience Ideal for large-scale automation platforms like AWX.\nInstalling AWX Using the AWX Operator With Kubernetes ready, the next step was deploying AWX using the AWX Operator.\nAt the time of writing, I was using AWX 24.6.1.\nThe AWX Operator greatly simplifies:\nDeploying AWX Managing upgrades Handling AWX pods Maintaining AWX configuration It’s the recommended method for AWX on Kubernetes.\nSetting Up Custom Execution Environments or Using Requirements YAML By default, the AWX Operator does not include Cisco-related Ansible collections.\nThere are two approaches to include necessary dependencies:\nOption 1 — Custom Execution Environment (EE) Build a custom EE that includes:\nPython libraries netmiko ncclient Cisco Ansible Galaxy collections Requires building a Dockerfile, then pushing the built EE image to a registry (Docker Hub / GHCR / internal repo).\nAWX then uses this EE for job execution.\nOption 2 — requirements.yaml Create a requirements.yaml under your project:\ncollections: - cisco.ios - cisco.iosxe - community.network AWX User Interface Overview For those new to AWX, the UI offers a clear and structured way to manage automation.\nProjects This is where you link the Git repositories containing the Cisco IOS XE upgrade playbooks.\nProjects can be synced to pull the latest playbook updates.\nNote: Synchronisation is not automatic — every time you commit to Git, you must click Sync in AWX.\nInventories Devices (routers and switches) are organised into Inventory Groups.\nThis allows you to separate devices by type or purpose, ensuring the correct playbooks are applied to the right devices.\nCredentials Device access credentials are stored securely within AWX, including SSH keys and passwords.\nThis makes it easy to automate connecting to Cisco devices during playbook execution.\nTemplates Playbooks are turned into Job Templates, with surveys to capture necessary inputs such as:\nfirmware versions file names checksum values The AWX UI makes managing these components and automating the entire upgrade workflow straightforward and scalable.\nAWX Job Templates for Cisco IOS XE Upgrades The playbooks for upgrading Cisco IOS XE devices were ported into AWX as templates.\nKey templates included:\nActivate Firmware (activate.yaml) This template uses a survey to capture variables such as:\ntarget_version upgrade_filename md5_checksum These parameters ensure a smooth firmware activation process using the install activate command.\nFlash Cleanup (cleanup-flash.yaml) This template removes old, inactive files from the device’s flash memory using the install remove inactive command.\nUpload Firmware via TFTP/SCP (upload-image-tftp.yaml) This playbook handles the firmware file upload, with survey options for:\nselecting the transfer mode (TFTP or SCP) specifying the server_ip validating available storage space on the device The flexibility provided by AWX’s job templates and survey mechanisms makes it possible to customise the upgrade process for different device types with minimal manual intervention.\nRepository For those who missed my Github repository, visit here: svenuscf/ansible-cisco-upgrade (github.com). A new sub-directory awx is created to store related playbooks for AWX deployment.\nGood luck!\n",
  "wordCount" : "753",
  "inLanguage": "en",
  "datePublished": "2024-05-01T00:00:00Z",
  "dateModified": "2024-05-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Gary Wong"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://garywong.pro/posts/awx-network-automation/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Gary Wong's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://garywong.pro/favicon.ico"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://garywong.pro/" accesskey="h" title="Gary Wong&#39;s Blog (Alt + H)">Gary Wong&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://garywong.pro/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://garywong.pro/tags/networking/" title="Networking">
                    <span>Networking</span>
                </a>
            </li>
            <li>
                <a href="https://garywong.pro/tags/ai/" title="AI">
                    <span>AI</span>
                </a>
            </li>
            <li>
                <a href="https://garywong.pro/tags/guqin/" title="Guqin">
                    <span>Guqin</span>
                </a>
            </li>
            <li>
                <a href="https://garywong.pro/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://garywong.pro/">Home</a>&nbsp;»&nbsp;<a href="https://garywong.pro/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Continue the Network Automation Journey Using AWX
    </h1>
    <div class="post-meta"><span title='2024-05-01 00:00:00 +0000 UTC'>May 1, 2024</span>&nbsp;·&nbsp;<span>4 min</span>&nbsp;·&nbsp;<span>Gary Wong</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#what-is-awx" aria-label="What is AWX?">What is AWX?</a></li>
                <li>
                    <a href="#awxs-limitation-with-interactive-prompts" aria-label="AWX’s Limitation with Interactive Prompts">AWX’s Limitation with Interactive Prompts</a></li>
                <li>
                    <a href="#workaround-using-cisco-embedded-event-manager-eem" aria-label="Workaround: Using Cisco Embedded Event Manager (EEM)">Workaround: Using Cisco Embedded Event Manager (EEM)</a></li>
                <li>
                    <a href="#awx" aria-label=""></a></li>
                <li>
                    <a href="#building-a-3-node-kubernetes-cluster-for-awx" aria-label="Building a 3-Node Kubernetes Cluster for AWX">Building a 3-Node Kubernetes Cluster for AWX</a></li>
                <li>
                    <a href="#installing-awx-using-the-awx-operator" aria-label="Installing AWX Using the AWX Operator">Installing AWX Using the AWX Operator</a></li>
                <li>
                    <a href="#setting-up-custom-execution-environments-or-using-requirements-yaml" aria-label="Setting Up Custom Execution Environments or Using Requirements YAML">Setting Up Custom Execution Environments or Using Requirements YAML</a><ul>
                        
                <li>
                    <a href="#option-1--custom-execution-environment-ee" aria-label="Option 1 — Custom Execution Environment (EE)">Option 1 — Custom Execution Environment (EE)</a></li>
                <li>
                    <a href="#option-2--requirementsyaml" aria-label="Option 2 — requirements.yaml">Option 2 — requirements.yaml</a></li></ul>
                </li>
                <li>
                    <a href="#awx-user-interface-overview" aria-label="AWX User Interface Overview">AWX User Interface Overview</a><ul>
                        
                <li>
                    <a href="#projects" aria-label="Projects">Projects</a></li>
                <li>
                    <a href="#inventories" aria-label="Inventories">Inventories</a></li>
                <li>
                    <a href="#credentials" aria-label="Credentials">Credentials</a></li>
                <li>
                    <a href="#templates" aria-label="Templates">Templates</a></li></ul>
                </li>
                <li>
                    <a href="#awx-job-templates-for-cisco-ios-xe-upgrades" aria-label="AWX Job Templates for Cisco IOS XE Upgrades">AWX Job Templates for Cisco IOS XE Upgrades</a><ul>
                        
                <li>
                    <a href="#activate-firmware-activateyaml" aria-label="Activate Firmware (activate.yaml)">Activate Firmware (activate.yaml)</a></li>
                <li>
                    <a href="#flash-cleanup-cleanup-flashyaml" aria-label="Flash Cleanup (cleanup-flash.yaml)">Flash Cleanup (cleanup-flash.yaml)</a></li>
                <li>
                    <a href="#upload-firmware-via-tftpscp-upload-image-tftpyaml" aria-label="Upload Firmware via TFTP/SCP (upload-image-tftp.yaml)">Upload Firmware via TFTP/SCP (upload-image-tftp.yaml)</a></li></ul>
                </li>
                <li>
                    <a href="#repository" aria-label="Repository">Repository</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>I have been working on a project recently to assist a customer in upgrading <strong>thousands of devices</strong> in their network. Managing such a large-scale upgrade requires automation to ensure consistency, efficiency, and reduced manual intervention.</p>
<p>For this project, <strong>AWX</strong> was selected as the automation UI platform, providing a powerful interface for managing Ansible playbooks, job templates, inventories, and credentials.</p>
<hr>
<h2 id="what-is-awx">What is AWX?<a hidden class="anchor" aria-hidden="true" href="#what-is-awx">#</a></h2>
<p><strong>AWX</strong> is the upstream open-source project for Red Hat Ansible Tower.<br>
It provides an intuitive web UI for:</p>
<ul>
<li>Organizing Ansible projects</li>
<li>Executing playbooks</li>
<li>Managing credentials</li>
<li>Defining inventories</li>
<li>Creating job templates and surveys</li>
</ul>
<p>AWX is especially useful when automating <strong>network device upgrades</strong>, where thousands of routers/switches require consistent and validated operations.</p>
<hr>
<h2 id="awxs-limitation-with-interactive-prompts">AWX’s Limitation with Interactive Prompts<a hidden class="anchor" aria-hidden="true" href="#awxs-limitation-with-interactive-prompts">#</a></h2>
<p>One challenge I encountered:</p>
<blockquote>
<p><strong>AWX cannot handle interactive CLI prompts from network devices.</strong></p>
</blockquote>
<p>During Cisco IOS XE upgrades, devices commonly send prompts (e.g., “Are you sure?”).<br>
AWX jobs <strong>cannot respond</strong> to these prompts, causing the playbook to hang or fail.</p>
<p>This limitation required a workaround.</p>
<hr>
<h2 id="workaround-using-cisco-embedded-event-manager-eem">Workaround: Using Cisco Embedded Event Manager (EEM)<a hidden class="anchor" aria-hidden="true" href="#workaround-using-cisco-embedded-event-manager-eem">#</a></h2>
<p>To bypass interactive prompts, I used <strong>EEM scripts</strong>.</p>
<p>EEM runs natively on Cisco devices and can automatically respond to system prompts during upgrades.</p>
<p>This ensures:</p>
<ul>
<li>The playbook execution does not pause</li>
<li>The upgrade workflow remains non-interactive</li>
<li>AWX can perform fully automated rolling upgrades across thousands of devices</li>
</ul>
<p>This combination — <strong>AWX orchestrating automation + EEM handling device-level interactivity</strong> — proved extremely stable.</p>
<h2 id="awx"><img alt="AWX" loading="lazy" src="/posts/awx-network-automation/awx1.avif"><a hidden class="anchor" aria-hidden="true" href="#awx">#</a></h2>
<h2 id="building-a-3-node-kubernetes-cluster-for-awx">Building a 3-Node Kubernetes Cluster for AWX<a hidden class="anchor" aria-hidden="true" href="#building-a-3-node-kubernetes-cluster-for-awx">#</a></h2>
<p>Before deploying AWX, I built a <strong>3-node Kubernetes cluster</strong>:</p>
<ul>
<li><strong>1 control plane</strong></li>
<li><strong>2 worker nodes</strong></li>
</ul>
<p>Key components:</p>
<ul>
<li>Deployed using <code>kubeadm</code></li>
<li><strong>containerd</strong> as the container runtime</li>
<li>Installed pod network (CNI plugin)</li>
<li>Configured networking/storage classes for AWX persistence</li>
</ul>
<p>This Kubernetes foundation provides:</p>
<ul>
<li>High availability</li>
<li>Scalability</li>
<li>Resilience</li>
</ul>
<p>Ideal for large-scale automation platforms like AWX.</p>
<p><img alt="K8s" loading="lazy" src="/posts/awx-network-automation/awx2.avif"></p>
<hr>
<h2 id="installing-awx-using-the-awx-operator">Installing AWX Using the AWX Operator<a hidden class="anchor" aria-hidden="true" href="#installing-awx-using-the-awx-operator">#</a></h2>
<p>With Kubernetes ready, the next step was deploying AWX using the <strong>AWX Operator</strong>.</p>
<p>At the time of writing, I was using <strong>AWX 24.6.1</strong>.</p>
<p>The AWX Operator greatly simplifies:</p>
<ul>
<li>Deploying AWX</li>
<li>Managing upgrades</li>
<li>Handling AWX pods</li>
<li>Maintaining AWX configuration</li>
</ul>
<p>It&rsquo;s the recommended method for AWX on Kubernetes.</p>
<hr>
<h2 id="setting-up-custom-execution-environments-or-using-requirements-yaml">Setting Up Custom Execution Environments or Using Requirements YAML<a hidden class="anchor" aria-hidden="true" href="#setting-up-custom-execution-environments-or-using-requirements-yaml">#</a></h2>
<p>By default, the AWX Operator <strong>does not include Cisco-related Ansible collections</strong>.</p>
<p>There are two approaches to include necessary dependencies:</p>
<hr>
<h3 id="option-1--custom-execution-environment-ee"><strong>Option 1 — Custom Execution Environment (EE)</strong><a hidden class="anchor" aria-hidden="true" href="#option-1--custom-execution-environment-ee">#</a></h3>
<p>Build a custom EE that includes:</p>
<ul>
<li>Python libraries</li>
<li>netmiko</li>
<li>ncclient</li>
<li>Cisco Ansible Galaxy collections</li>
</ul>
<p>Requires building a Dockerfile, then pushing the built EE image to a registry (Docker Hub / GHCR / internal repo).<br>
AWX then uses this EE for job execution.</p>
<hr>
<h3 id="option-2--requirementsyaml"><strong>Option 2 — requirements.yaml</strong><a hidden class="anchor" aria-hidden="true" href="#option-2--requirementsyaml">#</a></h3>
<p>Create a <code>requirements.yaml</code> under your project:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">collections</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">cisco.ios</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">cisco.iosxe</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">community.network</span>
</span></span></code></pre></div><hr>
<h2 id="awx-user-interface-overview">AWX User Interface Overview<a hidden class="anchor" aria-hidden="true" href="#awx-user-interface-overview">#</a></h2>
<p>For those new to AWX, the UI offers a clear and structured way to manage automation.</p>
<h3 id="projects">Projects<a hidden class="anchor" aria-hidden="true" href="#projects">#</a></h3>
<p>This is where you link the Git repositories containing the Cisco IOS XE upgrade playbooks.<br>
Projects can be synced to pull the latest playbook updates.<br>
<strong>Note:</strong> Synchronisation is <em>not automatic</em> — every time you commit to Git, you must click <strong>Sync</strong> in AWX.</p>
<h3 id="inventories">Inventories<a hidden class="anchor" aria-hidden="true" href="#inventories">#</a></h3>
<p>Devices (routers and switches) are organised into <strong>Inventory Groups</strong>.<br>
This allows you to separate devices by type or purpose, ensuring the correct playbooks are applied to the right devices.</p>
<h3 id="credentials">Credentials<a hidden class="anchor" aria-hidden="true" href="#credentials">#</a></h3>
<p>Device access credentials are stored securely within AWX, including SSH keys and passwords.<br>
This makes it easy to automate connecting to Cisco devices during playbook execution.</p>
<h3 id="templates">Templates<a hidden class="anchor" aria-hidden="true" href="#templates">#</a></h3>
<p>Playbooks are turned into <strong>Job Templates</strong>, with <strong>surveys</strong> to capture necessary inputs such as:</p>
<ul>
<li>firmware versions</li>
<li>file names</li>
<li>checksum values</li>
</ul>
<p>The AWX UI makes managing these components and automating the entire upgrade workflow straightforward and scalable.</p>
<p><img alt="Tasks" loading="lazy" src="/posts/awx-network-automation/awx3.avif"></p>
<hr>
<h2 id="awx-job-templates-for-cisco-ios-xe-upgrades">AWX Job Templates for Cisco IOS XE Upgrades<a hidden class="anchor" aria-hidden="true" href="#awx-job-templates-for-cisco-ios-xe-upgrades">#</a></h2>
<p>The playbooks for upgrading Cisco IOS XE devices were ported into AWX as templates.<br>
Key templates included:</p>
<h3 id="activate-firmware-activateyaml">Activate Firmware (<code>activate.yaml</code>)<a hidden class="anchor" aria-hidden="true" href="#activate-firmware-activateyaml">#</a></h3>
<p>This template uses a survey to capture variables such as:</p>
<ul>
<li><code>target_version</code></li>
<li><code>upgrade_filename</code></li>
<li><code>md5_checksum</code></li>
</ul>
<p>These parameters ensure a smooth firmware activation process using the <code>install activate</code> command.</p>
<h3 id="flash-cleanup-cleanup-flashyaml">Flash Cleanup (<code>cleanup-flash.yaml</code>)<a hidden class="anchor" aria-hidden="true" href="#flash-cleanup-cleanup-flashyaml">#</a></h3>
<p>This template removes old, inactive files from the device’s flash memory using the <code>install remove inactive</code> command.</p>
<h3 id="upload-firmware-via-tftpscp-upload-image-tftpyaml">Upload Firmware via TFTP/SCP (<code>upload-image-tftp.yaml</code>)<a hidden class="anchor" aria-hidden="true" href="#upload-firmware-via-tftpscp-upload-image-tftpyaml">#</a></h3>
<p>This playbook handles the firmware file upload, with survey options for:</p>
<ul>
<li>selecting the transfer mode (TFTP or SCP)</li>
<li>specifying the <code>server_ip</code></li>
<li>validating available storage space on the device</li>
</ul>
<p>The flexibility provided by AWX’s job templates and survey mechanisms makes it possible to customise the upgrade process for different device types with minimal manual intervention.</p>
<p><img alt="Templates" loading="lazy" src="/posts/awx-network-automation/awx4.avif"></p>
<hr>
<h2 id="repository">Repository<a hidden class="anchor" aria-hidden="true" href="#repository">#</a></h2>
<p>For those who missed my Github repository, visit here: svenuscf/ansible-cisco-upgrade (github.com). A new sub-directory awx is created to store related playbooks for AWX deployment.</p>
<p>Good luck!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://garywong.pro/tags/automation/">Automation</a></li>
      <li><a href="https://garywong.pro/tags/ansible/">Ansible</a></li>
      <li><a href="https://garywong.pro/tags/awx/">Awx</a></li>
      <li><a href="https://garywong.pro/tags/kubernetes/">Kubernetes</a></li>
      <li><a href="https://garywong.pro/tags/cisco/">Cisco</a></li>
      <li><a href="https://garywong.pro/tags/networking/">Networking</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://garywong.pro/posts/automating-cisco-device-upgrades-ansible/">
    <span class="title">« Prev</span>
    <br>
    <span>Automating Cisco Device Upgrades with Ansible: A Playbook Journey</span>
  </a>
  <a class="next" href="https://garywong.pro/posts/dhcp-relay-evpn-vxlan/">
    <span class="title">Next »</span>
    <br>
    <span>DHCP Relay in EVPN-VXLAN</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Continue the Network Automation Journey Using AWX on x"
            href="https://x.com/intent/tweet/?text=Continue%20the%20Network%20Automation%20Journey%20Using%20AWX&amp;url=https%3a%2f%2fgarywong.pro%2fposts%2fawx-network-automation%2f&amp;hashtags=automation%2cansible%2cawx%2ckubernetes%2ccisco%2cnetworking">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Continue the Network Automation Journey Using AWX on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fgarywong.pro%2fposts%2fawx-network-automation%2f&amp;title=Continue%20the%20Network%20Automation%20Journey%20Using%20AWX&amp;summary=Continue%20the%20Network%20Automation%20Journey%20Using%20AWX&amp;source=https%3a%2f%2fgarywong.pro%2fposts%2fawx-network-automation%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Continue the Network Automation Journey Using AWX on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fgarywong.pro%2fposts%2fawx-network-automation%2f&title=Continue%20the%20Network%20Automation%20Journey%20Using%20AWX">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Continue the Network Automation Journey Using AWX on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fgarywong.pro%2fposts%2fawx-network-automation%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Continue the Network Automation Journey Using AWX on whatsapp"
            href="https://api.whatsapp.com/send?text=Continue%20the%20Network%20Automation%20Journey%20Using%20AWX%20-%20https%3a%2f%2fgarywong.pro%2fposts%2fawx-network-automation%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Continue the Network Automation Journey Using AWX on telegram"
            href="https://telegram.me/share/url?text=Continue%20the%20Network%20Automation%20Journey%20Using%20AWX&amp;url=https%3a%2f%2fgarywong.pro%2fposts%2fawx-network-automation%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Continue the Network Automation Journey Using AWX on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Continue%20the%20Network%20Automation%20Journey%20Using%20AWX&u=https%3a%2f%2fgarywong.pro%2fposts%2fawx-network-automation%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://garywong.pro/">Gary Wong&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
